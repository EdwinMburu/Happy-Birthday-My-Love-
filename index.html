<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Shee üíñ</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
    background: #0a0a1a;
    color: white;
}

/* ===== PAGE CONTAINER ===== */
.page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    display: none;
    opacity: 0;
    transition: opacity 0.8s ease;
}

.page.active {
    display: flex;
    opacity: 1;
}

/* ===== STARRY BACKGROUND ===== */
.stars-bg {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.star {
    position: absolute;
    background: white;
    border-radius: 50%;
    animation: twinkle var(--duration) ease-in-out infinite;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.2; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.2); }
}

/* ===== PAGE 1: WELCOME ===== */
#page1 {
    background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.welcome-content {
    z-index: 10;
    position: relative;
}

.welcome-content h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 5rem;
    margin-bottom: 20px;
    background: linear-gradient(to right, #ff69b4, #ffb6c1, #ff69b4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% auto;
    animation: shine 3s linear infinite;
    text-shadow: 0 0 40px rgba(255,105,180,0.3);
}

.welcome-content p {
    font-size: 1.3rem;
    margin-bottom: 50px;
    opacity: 0.9;
    color: #ffb6c1;
}

.enter-btn {
    padding: 20px 60px;
    background: linear-gradient(135deg, #ff69b4, #ff1493);
    border: none;
    border-radius: 50px;
    color: white;
    font-size: 1.3rem;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 0 40px rgba(255,105,180,0.5);
    animation: pulse 2s infinite;
}

.enter-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 60px rgba(255,105,180,0.8);
}

/* ===== PAGE 2: COSMOS ===== */
#page2 {
    background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.cosmos-content {
    z-index: 10;
    text-align: center;
    position: relative;
}

.cosmos-content h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 4rem;
    background: linear-gradient(to right, #ff69b4, #ff1493, #ff69b4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 200% auto;
    animation: shine 3s linear infinite;
    margin-bottom: 10px;
}

.hint-text {
    font-size: 1.1rem;
    opacity: 0.8;
    margin-bottom: 30px;
    color: #ffb6c1;
}

#countdownContainer {
    display: flex;
    gap: 20px;
    margin-bottom: 40px;
    flex-wrap: wrap;
    justify-content: center;
}

.timeBox {
    background: rgba(255,105,180,0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,105,180,0.3);
    border-radius: 15px;
    padding: 15px 10px;
    width: 80px; /* Changed from 100px */
    box-shadow: 0 0 20px rgba(255,105,180,0.2);
}

.timeBox h2 {
    font-size: 2rem;
    color: #ff69b4;
    margin-bottom: 5px;
}

.timeBox p {
    font-size: 0.8rem;
    color: #ffb6c1;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.hidden-star {
    position: absolute;
    font-size: 2.5rem;
    cursor: pointer;
    animation: pulse 2s infinite;
    filter: drop-shadow(0 0 15px gold);
    transition: transform 0.3s;
    z-index: 20;
}

.hidden-star:hover {
    transform: scale(1.3) rotate(15deg);
}

.hidden-star.found {
    animation: foundStar 0.5s forwards;
    pointer-events: none;
}

@keyframes foundStar {
    to { transform: scale(0) rotate(360deg); opacity: 0; }
}

.star-reason {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    background: rgba(0,0,0,0.95);
    border: 2px solid #ff69b4;
    border-radius: 20px;
    padding: 30px;
    max-width: 400px;
    text-align: center;
    z-index: 100;
    box-shadow: 0 0 50px rgba(255,105,180,0.5);
}

.star-reason.show {
    animation: popIn 0.5s forwards;
}

@keyframes popIn {
    to { transform: translate(-50%, -50%) scale(1); }
}

.star-reason h3 {
    color: #ff69b4;
    margin-bottom: 15px;
    font-family: 'Great Vibes', cursive;
    font-size: 2.2rem;
}

.star-reason p {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #f0f0f0;
}

.progress {
    position: absolute;
    bottom: 30px;
    font-size: 1.2rem;
    color: #ffb6c1;
    background: rgba(0,0,0,0.5);
    padding: 10px 20px;
    border-radius: 20px;
}

.unlock-btn {
    margin-top: 30px;
    padding: 15px 40px;
    background: linear-gradient(135deg, #ff69b4, #ff1493);
    border: none;
    border-radius: 50px;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s;
    box-shadow: 0 0 30px rgba(255,105,180,0.6);
    animation: pulse 2s infinite;
}

.unlock-btn.visible {
    opacity: 1;
    pointer-events: all;
}

/* ===== PAGE 3: GALLERY ===== */
#page3 {
    background: radial-gradient(ellipse at center, #2d1b4e 0%, #0a0a1a 100%);
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    overflow-y: auto;
}

.gallery-header {
    text-align: center;
    margin-bottom: 40px;
    z-index: 10;
}

.gallery-header h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 3.5rem;
    color: #ff69b4;
    text-shadow: 0 0 30px rgba(255,105,180,0.5);
}

.gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    max-width: 1000px;
    width: 100%;
    z-index: 10;
}

.polaroid {
    background: white;
    padding: 10px 10px 30px 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    transform: rotate(var(--rotation));
    transition: all 0.3s;
    cursor: pointer;
}

.polaroid:hover {
    transform: rotate(0deg) scale(1.1);
    z-index: 100;
    box-shadow: 0 10px 30px rgba(255,105,180,0.5);
}

.polaroid img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    background: #ddd;
    display: block;
}

.polaroid .caption {
    font-family: 'Great Vibes', cursive;
    color: #333;
    text-align: center;
    margin-top: 8px;
    font-size: 1rem;
}

.next-btn {
    margin-top: 40px;
    padding: 15px 40px;
    background: transparent;
    border: 2px solid #ff69b4;
    color: #ff69b4;
    border-radius: 50px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s;
    z-index: 10;
}

.next-btn:hover {
    background: #ff69b4;
    color: white;
    box-shadow: 0 0 30px rgba(255,105,180,0.6);
}

/* ===== PAGE 4: LETTER ===== */
#page4 {
    background: radial-gradient(circle at center, #1a1a2e 0%, #0a0a1a 100%);
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 40px;
}

.voice-section {
    text-align: center;
    margin-bottom: 30px;
    z-index: 10;
}

.voice-btn {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff69b4, #ff1493);
    border: none;
    color: white;
    font-size: 2.5rem;
    cursor: pointer;
    box-shadow: 0 0 40px rgba(255,105,180,0.5);
    animation: pulse 2s infinite;
    transition: transform 0.3s;
    margin-bottom: 15px;
}

.voice-btn:hover {
    transform: scale(1.1);
}

.voice-btn.playing {
    animation: soundWave 1s infinite;
}

@keyframes soundWave {
    0%, 100% { box-shadow: 0 0 40px rgba(255,105,180,0.5); }
    50% { box-shadow: 0 0 80px rgba(255,105,180,0.9); }
}

.voice-label {
    color: #ff69b4;
    font-size: 1.1rem;
}

.waveform {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 4px;
    height: 50px;
    margin-top: 20px;
    opacity: 0;
    transition: opacity 0.3s;
}

.waveform.active {
    opacity: 1;
}

.wave-bar {
    width: 6px;
    background: linear-gradient(to top, #ff1493, #ff69b4);
    border-radius: 3px;
    animation: wave 1s ease-in-out infinite;
}

@keyframes wave {
    0%, 100% { height: 10px; }
    50% { height: 50px; }
}

.letter-container {
    max-width: 700px;
    background: rgba(255,255,255,0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,105,180,0.2);
    border-radius: 20px;
    padding: 40px;
    z-index: 10;
    max-height: 50vh;
    overflow-y: auto;
}

.letter-text {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.2rem;
    line-height: 1.8;
    color: #f0f0f0;
}

/* ===== PAGE 5: FINALE ===== */
#page5 {
    background: #000;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

#fireworksCanvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.catch-game {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 10;
}

.falling-star {
    position: absolute;
    font-size: 2rem;
    cursor: pointer;
    animation: fall linear;
    z-index: 20;
}

@keyframes fall {
    to { transform: translateY(100vh) rotate(360deg); }
}

.score-board {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.8rem;
    color: #ff69b4;
    z-index: 30;
    text-shadow: 0 0 20px rgba(255,105,180,0.8);
}

.proposal-reveal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    text-align: center;
    z-index: 100;
    background: rgba(0,0,0,0.95);
    padding: 60px;
    border-radius: 30px;
    border: 3px solid #ff69b4;
    box-shadow: 0 0 100px rgba(255,105,180,0.6);
}

.proposal-reveal.show {
    animation: proposalIn 1s forwards;
}

@keyframes proposalIn {
    to { transform: translate(-50%, -50%) scale(1); }
}

.proposal-reveal h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 5rem;
    color: #ff69b4;
    margin-bottom: 20px;
}

.proposal-reveal .ring {
    font-size: 6rem;
    animation: ringPulse 2s infinite;
    margin: 30px 0;
}

@keyframes ringPulse {
    0%, 100% { transform: scale(1); filter: drop-shadow(0 0 20px gold); }
    50% { transform: scale(1.2); filter: drop-shadow(0 0 50px gold); }
}

.proposal-reveal p {
    font-size: 1.4rem;
    color: #ffb6c1;
    line-height: 1.6;
}

/* ===== UTILITIES ===== */
@keyframes glow {
    from { text-shadow: 0 0 20px rgba(255,105,180,0.5); }
    to { text-shadow: 0 0 40px rgba(255,105,180,0.8), 0 0 60px rgba(255,105,180,0.4); }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes shine {
    to { background-position: 200% center; }
}

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255,105,180,0.1);
}

::-webkit-scrollbar-thumb {
    background: #ff69b4;
    border-radius: 4px;
}
</style>
</head>
<body>

<!-- AUDIO - MPEG FORMAT -->
<audio id="bgMusic" loop>
    <source src="music.mpeg" type="audio/mpeg">
</audio>

<!-- PAGE 1: WELCOME -->
<div class="page active" id="page1">
    <div class="stars-bg" id="page1Stars"></div>
    <div class="welcome-content">
        <h1>For Shee üíñ</h1>
        <p>A love written in the stars</p>
        <button class="enter-btn" onclick="startJourney()">Enter Our Universe ‚ú®</button>
    </div>
</div>

<!-- PAGE 2: COSMOS -->
<div class="page" id="page2">
    <div class="stars-bg" id="page2Stars"></div>
    
    <div class="cosmos-content">
        <h1>Happy 21st Birthday</h1>
        <p class="hint-text">Find the 5 hidden stars to unlock your surprise</p>
        <div id="countdownContainer">
    <div class="timeBox"><h2 id="months">--</h2><p>Months</p></div>
    <div class="timeBox"><h2 id="weeks">--</h2><p>Weeks</p></div>
    <div class="timeBox"><h2 id="days">--</h2><p>Days</p></div>
    <div class="timeBox"><h2 id="hours">--</h2><p>Hours</p></div>
    <div class="timeBox"><h2 id="minutes">--</h2><p>Minutes</p></div>
    <div class="timeBox"><h2 id="seconds">--</h2><p>Seconds</p></div>
</div>
        
        <button class="unlock-btn" id="unlockBtn" onclick="goToPage(3)">
            Enter the Gallery ‚≠ê
        </button>
    </div>
    
    <div class="progress" id="progress">Stars found: 0/5</div>
    
    <!-- Star Popups -->
    <div class="star-reason" id="reason1">
        <h3>üíú You Love God</h3>
        <p>Your faith shines through everything you do, and it makes me fall for you more every single day.</p>
        <button onclick="closeReason()" style="margin-top: 15px; padding: 10px 25px; background: #ff69b4; border: none; border-radius: 20px; color: white; cursor: pointer;">Continue</button>
    </div>
    <div class="star-reason" id="reason2">
        <h3>ü§ù You're Loyal & Kind</h3>
        <p>In a world full of fake, you're my real. My person. My always.</p>
        <button onclick="closeReason()" style="margin-top: 15px; padding: 10px 25px; background: #ff69b4; border: none; border-radius: 20px; color: white; cursor: pointer;">Continue</button>
    </div>
    <div class="star-reason" id="reason3">
        <h3>‚òÄÔ∏è Your Smile</h3>
        <p>One look from you and the world stops. You're my sunshine in human form.</p>
        <button onclick="closeReason()" style="margin-top: 15px; padding: 10px 25px; background: #ff69b4; border: none; border-radius: 20px; color: white; cursor: pointer;">Continue</button>
    </div>
    <div class="star-reason" id="reason4">
        <h3>üè† Your Heart</h3>
        <p>You feel deeply, love harder, and make my heart feel at home.</p>
        <button onclick="closeReason()" style="margin-top: 15px; padding: 10px 25px; background: #ff69b4; border: none; border-radius: 20px; color: white; cursor: pointer;">Continue</button>
    </div>
    <div class="star-reason" id="reason5">
        <h3>üîê You Choose Me</h3>
        <p>You make me feel safe and valued. I'll spend forever proving you right.</p>
        <button onclick="closeReason()" style="margin-top: 15px; padding: 10px 25px; background: #ff69b4; border: none; border-radius: 20px; color: white; cursor: pointer;">Continue</button>
    </div>
</div>

<!-- PAGE 3: GALLERY -->
<div class="page" id="page3">
    <div class="stars-bg" id="page3Stars"></div>
    <div class="gallery-header">
        <h1>Our Memories</h1>
        <p style="color: #ffb6c1;">20 moments, infinite love</p>
    </div>
    
    <div class="gallery-grid" id="galleryGrid"></div>
    
    <button class="next-btn" onclick="goToPage(4)">Read My Letter üíå</button>
</div>

<!-- PAGE 4: LETTER -->
<div class="page" id="page4">
    <div class="stars-bg" id="page4Stars"></div>
    <div class="voice-section">
        <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()">üéôÔ∏è</button>
        <div class="voice-label">Play my voice while you read</div>
        <div class="waveform" id="waveform"></div>
    </div>
    
    <div class="letter-container">
        <div class="letter-text" id="letterText"></div>
    </div>
    
    <button class="next-btn" onclick="goToPage(5)" style="margin-top: 30px;">The Finale ‚ú®</button>
</div>

<!-- PAGE 5: FINALE -->
<div class="page" id="page5">
    <canvas id="fireworksCanvas"></canvas>
    <div class="catch-game" id="catchGame"></div>
    <div class="score-board" id="scoreBoard">Catch 21 stars: 0/21</div>
    
    <div class="proposal-reveal" id="proposalReveal">
        <h1>Forever Starts Now</h1>
        <div class="ring">üíç</div>
        <p>
            Shee, this is forever.<br>
            And forever starts with a question<br>
            I'll ask you under real stars.<br><br>
            <span style="font-size: 1.8rem; color: #ff69b4;">See you soon, my love.</span><br>
            <span style="font-size: 1.1rem; opacity: 0.8;">‚Äî Edwin üíô</span>
        </p>
    </div>
</div>

<script>
let currentPage = 1;
let foundStars = 0;
const starsFound = [false, false, false, false, false];
let gameScore = 0;
let letterTyped = false;
let voicePlaying = false;
let musicStarted = false;
let countdownInterval = null;

// Create stars for all pages
function createStars(containerId, count = 150) {
    const container = document.getElementById(containerId);
    if(!container) return;
    container.innerHTML = '';
    
    for(let i = 0; i < count; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        const size = Math.random() * 3 + 1;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
        star.style.animationDelay = Math.random() * 5 + 's';
        container.appendChild(star);
    }
}

// Initialize page 1 stars
createStars('page1Stars', 200);

// Create waveform bars
const waveform = document.getElementById('waveform');
for(let i = 0; i < 25; i++) {
    const bar = document.createElement('div');
    bar.className = 'wave-bar';
    bar.style.animationDelay = (i * 0.05) + 's';
    bar.style.height = Math.random() * 40 + 10 + 'px';
    waveform.appendChild(bar);
}

// Start journey with music
function startJourney() {
    // Start music on user click (browser requirement)
    const music = document.getElementById('bgMusic');
    music.volume = 0.7;
    music.play().then(() => {
        console.log('Music playing');
        musicStarted = true;
    }).catch(e => {
        console.log('Music play failed:', e);
        alert('Please click again to allow music');
    });
    
    goToPage(2);
}

// Simple page transition
function goToPage(pageNum) {
    document.getElementById('page' + currentPage).classList.remove('active');
    document.getElementById('page' + pageNum).classList.add('active');
    currentPage = pageNum;
    
    // Initialize page
    if(pageNum === 2) initCosmos();
    if(pageNum === 3) initGallery();
    if(pageNum === 4) initLetter();
    if(pageNum === 5) initFinale();
}

// PAGE 2: COSMOS - FIXED COUNTDOWN
function initCosmos() {
    createStars('page2Stars', 150);
    
    // Hidden stars
    const positions = [
        {top: '15%', left: '10%'},
        {top: '70%', left: '85%'},
        {top: '25%', left: '80%'},
        {top: '80%', left: '15%'},
        {top: '45%', left: '50%'}
    ];
    
    // Remove old hidden stars
    document.querySelectorAll('.hidden-star').forEach(s => s.remove());
    
    positions.forEach((pos, idx) => {
        const star = document.createElement('div');
        star.className = 'hidden-star';
        star.innerHTML = '‚≠ê';
        star.style.top = pos.top;
        star.style.left = pos.left;
        star.onclick = () => findStar(idx + 1);
        document.getElementById('page2').appendChild(star);
    });
    
    // Clear any existing interval
    if(countdownInterval) clearInterval(countdownInterval);
    
    // Start countdown immediately and update every second
    updateCountdown();
countdownInterval = setInterval(updateCountdown, 1000);}
function updateCountdown() {
    const now = new Date();

    // Target: May 3, 2026 at 00:00 in local time
    const targetDate = new Date(2026, 4, 3, 0, 0, 0); 
    // (Month is 0-indexed: 4 = May)

    if (now >= targetDate) {
        document.getElementById('months').innerText = "0";
        document.getElementById('weeks').innerText = "0";
        document.getElementById('days').innerText = "0";
        document.getElementById('hours').innerText = "00";
        document.getElementById('minutes').innerText = "00";
        document.getElementById('seconds').innerText = "00";
        return;
    }

    // Clone date to calculate months properly
    let tempDate = new Date(now);
    let months = 0;

    // Count exact calendar months
    while (true) {
        let nextMonth = new Date(tempDate);
        nextMonth.setMonth(nextMonth.getMonth() + 1);

        if (nextMonth <= targetDate) {
            tempDate = nextMonth;
            months++;
        } else {
            break;
        }
    }

    // Remaining difference after months removed
    let diff = targetDate - tempDate;

    const totalSeconds = Math.floor(diff / 1000);
    const seconds = totalSeconds % 60;

    const totalMinutes = Math.floor(totalSeconds / 60);
    const minutes = totalMinutes % 60;

    const totalHours = Math.floor(totalMinutes / 60);
    const hours = totalHours % 24;

    const totalDays = Math.floor(totalHours / 24);

    const weeks = Math.floor(totalDays / 7);
    const days = totalDays % 7;

    document.getElementById('months').innerText = months;
    document.getElementById('weeks').innerText = weeks;
    document.getElementById('days').innerText = days;
    document.getElementById('hours').innerText = hours.toString().padStart(2, '0');
    document.getElementById('minutes').innerText = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').innerText = seconds.toString().padStart(2, '0');
}
function findStar(num) {
    if(starsFound[num-1]) return;
    starsFound[num-1] = true;
    foundStars++;
    
    event.target.classList.add('found');
    document.getElementById('progress').innerText = `Stars found: ${foundStars}/5`;
    document.getElementById('reason' + num).classList.add('show');
}

function closeReason() {
    document.querySelectorAll('.star-reason').forEach(r => r.classList.remove('show'));
    if(foundStars === 5) {
        document.getElementById('unlockBtn').classList.add('visible');
        document.getElementById('progress').innerHTML = 'All stars found! ‚ú®';
        document.getElementById('progress').style.color = '#ffd700';
    }
}

// PAGE 3: GALLERY
function initGallery() {
    createStars('page3Stars', 100);
    
    const grid = document.getElementById('galleryGrid');
    grid.innerHTML = '';
    
    const captions = [
        "My favorite smile", "That laugh", "Us being us", "Your eyes", "First date",
        "Random moment", "Your silly side", "When you're happy", "My safe place",
        "Forever us", "Your strength", "That look", "Us growing", "Your heart",
        "My person", "Best friend", "My home", "Your beauty", "Us against world", "Always"
    ];
    
    for(let i = 1; i <= 20; i++) {
        const polaroid = document.createElement('div');
        polaroid.className = 'polaroid';
        polaroid.style.setProperty('--rotation', (Math.random() * 10 - 5) + 'deg');
        polaroid.innerHTML = `
            <img src="image${i}.jpeg" alt="Memory ${i}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
            <div style="display:none; height:120px; background:linear-gradient(135deg, #ff69b4, #ff1493); color:white; align-items:center; justify-content:center; font-family:Great Vibes; font-size:1.5rem;">${i}</div>
            <div class="caption">${captions[i-1]}</div>
        `;
        grid.appendChild(polaroid);
    }
}

// PAGE 4: LETTER
function initLetter() {
    createStars('page4Stars', 100);
    
    if(letterTyped) return;
    letterTyped = true;
    
    const letter = `Hey Shee üíïüåπ,

Your best friend Edwin
Happy 21st Birthday üéÇ‚ú®üéâ

Today the world celebrates 21 years of you‚Ä¶ but for me, it celebrates the greatest gift my life has ever received. üíùüåç

Shee, I need you to understand something clearly ‚Äî "you are not just part of my life. You are my world. My peace. My safe place. My answered prayer." üôèüèΩüíó

From the first day you became my best friend, everything changed. The way I think. The way I dream. The way I see the future. Suddenly, every plan had your name written in it. Every goal had your smile at the finish line. Every prayer had "Shee" in it. Most of them üòÇ

You are the kind of woman people pray to find.

A girl who loves God.

Soft but strong. üå∏üí™
Sensitive but resilient. üíïüõ°Ô∏è
Kind but powerful. üëëüíñ
Loyal in a world that forgets how to stay. ü§ûüèΩüíû

At 21, you are not just getting older ‚Äî you are evolving into something even more extraordinary. And I watch you grow with so much admiration. The way you love God. The way you love your family. The way you love me. It humbles me. It inspires me. It challenges me to be better. üííüíì

Shee, your smile is dangerous. It disarms me every time. üòå‚ú®
Your laughter? Therapy.
Your voice? Calm in my chaos.
Your presence? Home. üè°üíó

When life feels heavy, you are my light. When I doubt myself, you remind me who I am. When I feel tired, you become my strength. Loving you is not just emotion ‚Äî it is commitment, intention, and certainty. üíçüî•

I love the way you care deeply.
I love the way you want attention and open talks.
I love the way you dance with joy. üíÉüèΩ‚ú®
I love your gentle heart.
I love your intelligence.
I love how you are both soft and fierce at the same time.

Shee, you deserve a love that is loud in public and gentle in private. A love that celebrates you openly and protects you quietly. A love that chooses you daily ‚Äî not only when it is easy, but especially when it requires effort. And I promise you ‚Äî I am choosing you. Every single day. üíØüíñ

On your 21st birthday, I pray over your life:

May God enlarge your territory. üôèüèΩ‚ú®
May He protect your heart and your dreams.
May He bless your studies and your future. üìöüåü
May He surround you with favor and peace.
May your smile never fade.

You are stepping into a new chapter now ‚Äî 21. A woman. Confident. Blooming. Radiant. üå∫üëë And I want you to know I am proud of you beyond words. Proud of your growth. Proud of your strength. Proud to call you mine. My best friend I mean üòè

If I could, I would give you the whole world wrapped in pink with chocolates and flowers and handwritten notes inside. üéÄüç´üå∑ But for now, I give you my heart ‚Äî fully, intentionally, permanently.

Shee, thank you for loving me. Thank you for choosing me. Thank you for being my best friend, my partner, my peace.

You are my today.
You are my future.
You are my answered prayer.

Happy 21st Birthday, my love üéÇüíñ‚ú®
May this year be filled with deep joy, exciting adventures, soft moments, big wins, laughter that makes you cry, and love that makes you feel completely safe.

I love you more than words can measure, more than distance can weaken, more than time can change. Always. Completely. Forever. üíû‚ôæÔ∏è

Yours,
Edwin üíô`;
    
    const container = document.getElementById('letterText');
    let i = 0;
    
    function type() {
        if(i < letter.length) {
            container.innerHTML = letter.substring(0, i+1) + '<span style="display:inline-block;width:2px;height:1.2em;background:#ff69b4;animation:blink 0.8s infinite;vertical-align:middle;"></span>';
            i++;
            setTimeout(type, 20);
        } else {
            container.innerHTML = letter;
        }
    }
    type();
}

function toggleVoice() {
    const btn = document.getElementById('voiceBtn');
    const waveform = document.getElementById('waveform');
    
    voicePlaying = !voicePlaying;
    btn.classList.toggle('playing');
    waveform.classList.toggle('active');
    
    if(voicePlaying) {
        // Add your voice file here
        // const audio = new Audio('voice.mp3');
        // audio.play();
    }
}

// PAGE 5: FINALE
function initFinale() {
    const canvas = document.getElementById('fireworksCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const fireworks = [];
    const particles = [];
    
    class Firework {
        constructor() {
            this.x = Math.random() * canvas.width;
            this.y = canvas.height;
            this.targetY = Math.random() * canvas.height * 0.4;
            this.speed = 6;
            this.color = `hsl(${Math.random() * 60 + 300}, 100%, 60%)`;
            this.exploded = false;
        }
        update() {
            this.y -= this.speed;
            if(this.y <= this.targetY && !this.exploded) {
                this.explode();
                this.exploded = true;
            }
        }
        explode() {
            for(let i = 0; i < 40; i++) {
                particles.push({
                    x: this.x,
                    y: this.y,
                    vx: (Math.random() - 0.5) * 8,
                    vy: (Math.random() - 0.5) * 8,
                    life: 80,
                    color: this.color
                });
            }
        }
        draw() {
            if(!this.exploded) {
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, 3, 8);
            }
        }
    }
    
    function animate() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        if(Math.random() < 0.04) fireworks.push(new Firework());
        
        fireworks.forEach((f, i) => {
            f.update();
            f.draw();
            if(f.exploded && f.y < -100) fireworks.splice(i, 1);
        });
        
        particles.forEach((p, i) => {
            p.x += p.vx;
            p.y += p.vy;
            p.vy += 0.1;
            p.life--;
            
            ctx.fillStyle = p.color;
            ctx.globalAlpha = p.life / 80;
            ctx.fillRect(p.x, p.y, 3, 3);
            ctx.globalAlpha = 1;
            
            if(p.life <= 0) particles.splice(i, 1);
        });
        
        requestAnimationFrame(animate);
    }
    animate();
    
    // Catch game
    const game = document.getElementById('catchGame');
    
    function spawnStar() {
        if(gameScore >= 21) return;
        
        const star = document.createElement('div');
        star.className = 'falling-star';
        star.innerHTML = '‚≠ê';
        star.style.left = Math.random() * 90 + 5 + '%';
        star.style.top = '-50px';
        star.style.animationDuration = (Math.random() * 2 + 3) + 's';
        
        star.onclick = () => {
            gameScore++;
            document.getElementById('scoreBoard').innerText = `Catch 21 stars: ${gameScore}/21`;
            star.remove();
            
            if(gameScore >= 21) {
                setTimeout(() => {
                    document.getElementById('proposalReveal').classList.add('show');
                    document.getElementById('scoreBoard').innerText = 'Complete! ‚ú®';
                }, 500);
            }
        };
        
        game.appendChild(star);
        setTimeout(() => star.remove(), 5000);
    }
    
    setInterval(spawnStar, 1200);
}

window.addEventListener('resize', () => {
    if(currentPage === 5) {
        const canvas = document.getElementById('fireworksCanvas');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
});
</script>

</body>
</html>